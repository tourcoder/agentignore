# .agentignore
AI 代理控制机制

### 1. 用户介绍

欢迎！本文档介绍了 `.agentignore`，这是一个简单而强大的方式，旨在让您精确控制 AI 代理和代码助手可以访问您代码库的哪些部分。

随着 AI 成为我们开发工作流的一部分，确保敏感信息、实验性代码或无关的文件不被处理或暴露变得至关重要。`.agentignore` 文件的工作方式类似于我们熟悉的 `.gitignore` 文件，但它专门用于 AI 工具。通过在项目的根目录下创建 `.agentignore` 文件，您可以列出希望 AI 代理完全忽略的文件和目录。

这可以帮助您：

* **保护敏感数据**：防止 AI 访问包含 API 密钥、凭据或个人信息的文件。
* **减少噪音**：排除日志、构建产物和依赖文件夹（如 `node_modules`），帮助 AI 专注于相关的源代码。
* **提高性能**：通过忽略不必要的文件，AI 工具可以更快地处理请求并提供更准确的结果。

### 2. 用户使用说明：如何使用 `.agentignore`

创建和使用 `.agentignore` 文件非常简单。

1. **创建文件**：在项目的根目录下创建一个新的文件，命名为 `.agentignore`。
2. **添加规则**：打开该文件并添加要排除的文件和目录的模式。语法与 `.gitignore` 相同。

#### 语法规则：

* **空行**：空行会被忽略，可以用于间隔。
* **注释**：以 `#` 开头的行会被视为注释并被忽略。
* **文件**：只需写出文件名（例如，`credentials.json`）。
* **目录**：要忽略整个目录，添加目录名并以斜杠 `/` 结尾（例如，`node_modules/`）。
* **通配符**：使用星号 `*` 作为通配符。例如，`*.log` 将忽略所有以 `.log` 结尾的文件。
* **否定**：要为某个规则添加例外，在前面加上感叹号 `!`。

#### 示例 `.agentignore` 文件：

**忽略依赖目录**

node_modules/  
vendor/

**忽略构建输出**

dist/  
build/  
*.o  
*.out

**忽略敏感配置文件**

.env  
config/secrets.yml  
api-keys.txt

**忽略日志和临时文件**

*.log  
*.tmp  
temp/

**忽略系统特定文件**

.DS_Store  
Thumbs.db

将此文件放入项目中，任何支持的 AI 工具将知道跳过这些指定路径。

### 3. IDE 和 AI 代理开发者实现指南

为了在您的 IDE 扩展或 AI 代理中集成对 `.agentignore` 的支持，您需要实现文件发现和解析机制。目标是尊重用户排除某些文件和目录的意图，避免 AI 处理它们。

#### 核心逻辑：

1. **文件发现**：当激活 AI 代理处理某个文件或目录时，必须查找 `.agentignore` 文件。查找应从当前文件所在目录开始，向上遍历直到项目根目录。找到的所有 `.agentignore` 文件的规则应合并（通常在根目录中的一个 `.agentignore` 文件就足够了）。

2. **解析**：解析器应逐行读取 `.agentignore` 文件。
    * 去除每行的空白字符。
    * 忽略空行或以 `#` 开头的行。
    * 其余的每一行都是一个模式。

3. **路径匹配算法**：在访问任何文件或目录之前，代理必须检查其路径是否与收集的模式匹配。
    * 路径应相对于 `.agentignore` 文件的位置。
    * 如果路径与 `.agentignore` 文件中的任何模式匹配，代理 **必须不** 读取、处理或包含该文件/目录。
    * 匹配逻辑应支持标准的 glob 模式（`*`、`**`、`?`）。为了保持一致性，强烈建议使用一个库来模拟 `.gitignore` 的匹配行为。

### 4. 贡献：如何提交 Pull Request (PR)

我们欢迎大家为 `.agentignore` 做出贡献！以下是贡献的步骤：

1. **Fork 仓库**：首先将此仓库 fork 到您的 GitHub 账户中。
2. **创建新分支**：为您的更改创建一个新分支。例如，`feature/add-ignore-pattern`。
3. **进行更改**：在您的分支中实现所需的更改。请确保遵循项目的编码风格和指南。
4. **测试更改**：确保您的更改按预期工作，并且不会破坏任何现有的功能。
5. **提交 Pull Request**：一旦您的更改准备好，提交一个 Pull Request (PR) 到主仓库。在您的 PR 描述中，清楚地解释您所做的更改以及为什么需要这些更改。
6. **处理反馈**：如果项目维护者有反馈或要求修改，请务必进行处理并更新您的 PR。

请确保您的贡献遵循这些指南，以保持项目的一致性和质量。

感谢您的贡献！

### 5. 致谢

本项目的完成离不开无数开源贡献者的支持。特别感谢 [gitignore](https://github.com/github/gitignore) 的创始人，他们为忽略文件模式奠定了基础。

### 6. 许可证

本项目使用 [Apache 2.0 许可证](/LICENSE) 授权。
